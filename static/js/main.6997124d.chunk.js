(this["webpackJsonprolling-code"]=this["webpackJsonprolling-code"]||[]).push([[0],{15:function(e,t,n){e.exports=n.p+"static/media/patrick.1fa52c93.jpg"},17:function(e,t,n){e.exports=n(40)},22:function(e,t,n){},35:function(e,t){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(14),o=n.n(s),l=(n(22),n(4)),i=n(3),c=n(15),u=n.n(c),m=n(5),d=n(8),h=n(10),p=n(9),g=n(16),v=n.n(g),f=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(m.a)(this,e),this.count=0,this.increment=function(){return++t.count},this.count=n};function b(e,t){if("openSesame"===e)return function(){return"Open Sesame"};if("rng"===e){var n=v()(t.toString());return function(){return(1e18*n()).toString()}}var a=new f;return function(){return a.increment().toString()}}n(36);var E=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).interval=void 0,a.pressStartTime=void 0,a.timeout=void 0,a.valueGenerator=void 0,a.autoPress=function(){a.onPress(),setTimeout(a.onLift,500)},a.onPress=function(e){e&&e.preventDefault(),a.pressStartTime=(new Date).getTime(),clearTimeout(a.timeout),a.props.inRange&&a.props.clickTransmitterCallback(a.state.nextValue),a.setState({nextValue:a.valueGenerator(),pressed:!0,showValue:!0,value:a.state.nextValue})},a.onLift=function(e){e&&e.preventDefault();var t=(new Date).getTime()-a.pressStartTime;a.timeout=window.setTimeout((function(){return a.setState({showValue:!1})}),1e3-t),a.setState({pressed:!1})},a.pressStartTime=-1,a.timeout=-1,a.valueGenerator=b(e.generator,e.seed),a.state={nextValue:a.valueGenerator(),pressed:!1,showValue:!1,value:""},a}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(e){e.generator===this.props.generator&&e.reset===this.props.reset||(this.valueGenerator=b(this.props.generator,this.props.seed),this.setState({nextValue:this.valueGenerator(),showValue:!1,value:""})),this.props.kioskMode&&e.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?(this.autoPress(),this.interval=window.setInterval(this.autoPress,3e3)):clearInterval(this.interval))}},{key:"render",value:function(){var e=this.props,t=e.generator,n=e.openSesame,a=this.state,s=a.nextValue,o=a.showValue,c=a.value;return r.a.createElement("div",{className:"transmitter"},r.a.createElement("div",{className:"value ".concat(t)+(o?" show":"")},r.a.createElement("span",null,c||"-"),r.a.createElement(l.a,{icon:i.e})),r.a.createElement("div",{className:"nextValue"+(o?"":" show"),style:{opacity:n?0:1}},r.a.createElement("b",null,"Next Value: "),s),r.a.createElement("br",null),r.a.createElement("div",{className:"keyContainer"},r.a.createElement("div",{className:"key"+(this.state.pressed?" pressed":"")},r.a.createElement("span",{className:"led"}),r.a.createElement("button",{onMouseDown:this.onPress,onMouseUp:this.onLift,onMouseLeave:this.onLift,onTouchStart:this.onPress,onTouchEnd:this.onLift,onTouchCancel:this.onLift},r.a.createElement(l.a,{icon:i.d})," / ",r.a.createElement(l.a,{icon:i.c})))))}}]),n}(r.a.Component),k=(n(37),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).valueGenerator=void 0,a.generateList=function(e){for(;e.length<a.props.listSize;)e.push(a.valueGenerator());return e},a.verifyValue=function(e){var t=a.state,n=t.list,r=t.locked,s=n.indexOf(e);n[s]&&(a.setState({list:a.generateList(n.slice(s+1))}),a.setState({locked:!r}))},a.getGeneratedValues=function(){var e=a.props,t=(e.openSesame,e.transmitterMessage);if(!a.props.openSesame)return r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"Generated Passcode List"),r.a.createElement("div",null,a.state.list.map((function(e,n){return r.a.createElement("div",{key:n,className:"value"+(e===t.value?" valid":"")},e)}))))},a.valueGenerator=b(e.generator,e.seed),a.state={list:a.generateList([]),locked:!0},a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;e.generator!==this.props.generator||e.reset!==this.props.reset?(this.valueGenerator=b(this.props.generator,this.props.seed),this.setState({list:this.generateList([]),locked:!0})):e.transmitterMessage!==this.props.transmitterMessage&&setTimeout((function(){return t.verifyValue(t.props.transmitterMessage.value)}),1e3)}},{key:"render",value:function(){var e=this.state.locked,t=e?"Locked":"Unlocked";return r.a.createElement("div",{className:"receiver"},r.a.createElement("div",{className:"status "+t},"Car is ",t," ",r.a.createElement(l.a,{icon:e?i.c:i.d})),r.a.createElement("br",null),this.getGeneratedValues())}}]),n}(r.a.Component)),y=(n(38),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).observer=void 0,a.ref=void 0,a.observerCallback=function(e,t){a.props.kioskMode&&a.setState({autoPlay:e[0].isIntersecting})},a.changeGenerator=function(e){var t=e.target.value;"rng"!==t&&"counter"!==t||a.setState({generator:t,transmitterMessage:{index:-1,value:""}})},a.clickTransmitterCallback=function(e){return a.setState({transmitterMessage:{index:a.state.transmitterMessage.index+1,value:e}})},a.reset=function(){a.setState({inRange:!0,reset:!a.state.reset,transmitterMessage:{index:-1,value:""}})},a.getSettings=function(){if(!1===a.props.kioskMode){var e=a.state,t=e.generator,n=e.inRange;return r.a.createElement("div",{className:"controlBar"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("b",null,"Number Generator:"),"\xa0 ",r.a.createElement("select",{value:t,onChange:a.changeGenerator},r.a.createElement("option",{value:"counter"},"Simple Counter"),r.a.createElement("option",{value:"rng"},"Pseudo Random"))),r.a.createElement("div",null,r.a.createElement("b",null,"In Range: ")," ",r.a.createElement("input",{type:"checkbox",checked:n,onChange:function(e){return a.setState({inRange:!n})}}))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return a.reset()}},r.a.createElement(l.a,{icon:i.f,title:"Reset!"}))))}},a.state={autoPlay:!1,generator:e.openSesame?"openSesame":"counter",inRange:!0,reset:!1,seed:(new Date).getTime(),transmitterMessage:{index:-1,value:""}},a.ref=r.a.createRef(),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){if(this.props.kioskMode&&this.ref.current){var e={root:document.querySelector("#app"),threshold:.5};this.observer=new IntersectionObserver(this.observerCallback,e),this.observer.observe(this.ref.current)}}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"render",value:function(){var e=this.props,t=e.kioskMode,n=e.openSesame,a=this.state,s=a.autoPlay,o=a.generator,l=a.inRange,i=a.reset,c=a.seed,u=a.transmitterMessage;return r.a.createElement("div",{className:"pair"+(t?" kiosk":""),ref:this.ref},this.getSettings(),r.a.createElement("div",{className:"devices "+(l?"inRange":"outOfRange")},r.a.createElement("div",null,r.a.createElement(E,{autoPlay:s,clickTransmitterCallback:this.clickTransmitterCallback,generator:o,inRange:l,kioskMode:t,openSesame:n,reset:i,seed:c})),r.a.createElement("div",null,r.a.createElement(k,{generator:o,listSize:n?1:5,openSesame:n,reset:i,seed:c,transmitterMessage:u}))))}}]),n}(r.a.Component));n(39);var w=function(){return r.a.createElement("div",{id:"app"},r.a.createElement("header",null,r.a.createElement("h1",null,"Rolling Code"),r.a.createElement("div",null,r.a.createElement("i",null,"Securing keyless entry systems"))),r.a.createElement("section",{className:"container"},r.a.createElement("div",{id:"imgContainer"},r.a.createElement("img",{src:u.a,alt:"Open Sesame"})),r.a.createElement("br",null),r.a.createElement("div",null,"Keyless entry systems such as cars and garage doors allow us to remotely lock or unlock our belongings. With car keys, whenever we press a button to lock or unlock, our key broadcasts a signal out into the open, hoping that our car is in range to hear. But how is this system secured?"),r.a.createElement("br",null),r.a.createElement(y,{kioskMode:!0,openSesame:!0}),r.a.createElement("br",null),r.a.createElement("div",null,'Imagine we had to shout a passcode "OPEN SESAME" on the top of our lungs anytime we wanted to unlock our car! Anybody could listen then steal our car by repeating the same passcode ("OPEN SESAME")!'),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("b",null,"Rolling Code")," is a system used to secure keyless entry systems. Instead of using the same passcode every time, Rolling Code systems deterministically generate single-use passcodes, so that no passcode will be repeated or reused."),r.a.createElement("br",null),r.a.createElement(y,{kioskMode:!0}),r.a.createElement("br",null),r.a.createElement("div",null,"An example this is a simple counter. Both the transmitter (our key ",r.a.createElement(l.a,{icon:i.b}),") and receiver (our car ",r.a.createElement(l.a,{icon:i.a}),") start from 0 and will increment their counts by one. Everytime we press the key, the key sends out next the number (ie 1...2...3...). Our car will listen for these numbers and internally increment its own count (1...2...3...) whenever it hears the valid number, so that no number is ever repeated. ",r.a.createElement("b",null,"A passcode is only valid for one use, and will not be accepted again"),". In order for this to work, both the transmitter and the receiver must:"),r.a.createElement("ol",null,r.a.createElement("li",null,'Agree on the same starting number (called a "seed")'),r.a.createElement("li",null,"Use the same function to deterministically generate successive numbers")),r.a.createElement("br",null),r.a.createElement("div",null,'This is why car keys need to "pair" or synchronize with the car first before being usable.'),r.a.createElement("hr",null),r.a.createElement("h3",null,"Pseusorandom Number Generators"),r.a.createElement("div",null,"Instead of using a simple counter, rolling code implementations can use ",r.a.createElement("b",null,"Pseudo Random Number Generators")," (PRNGs). These PRNGs, given a seed, will deterministically generate successive numbers; ideally, the generated sequence of numbers will be unpredictable (ie close to random) and will be completely different given a different seed."),r.a.createElement("h3",null,"Try it out yourself!"),r.a.createElement(y,{kioskMode:!1}),r.a.createElement("h3",null,"Why does the car have a list of numbers?"),r.a.createElement("div",null,'The car generates a list of numbers in case we press our key button when the car is not in range. Because our key generates numbers "forwards" and does not go back to previous numbers, our car must keep a list of future numbers that our key might send. When we our key transmits a number in the middle of the list, our car will invalidate all previous numbers and generate new numbers to fill the list. In this simple example, if we press our key too many times, it will generate numbers beyond those in our car\'s list, and we will be permanantly locked out. Rolling Code systems, such as ',r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/KeeLoq",target:"_blank",rel:"noopener noreferrer"},"KeeLoq")," can be designed to avoid this issue. Also, if lock and unlock are on separate buttons, both our key and car would have 2 rolling code systems starting with different seeds.")),r.a.createElement("footer",{className:"container"},r.a.createElement("p",null,"Thank you to Andrew Nohawk for the inspiration, explanation, and real-life hacking examples! ",r.a.createElement("a",{href:"https://www.andrewmohawk.com/2016/02/05/bypassing-rolling-code-systems/",target:"_blank",rel:"noopener noreferrer"},"https://www.andrewmohawk.com/2016/02/05/bypassing-rolling-code-systems/")),r.a.createElement("p",null,"Github Repo: ",r.a.createElement("a",{href:"https://github.com/harryli0088/rolling-code",target:"_blank",rel:"noopener noreferrer"},"https://github.com/harryli0088/rolling-code")),r.a.createElement("p",null,"Read more about Rolling Code: ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Rolling_code",target:"_blank",rel:"noopener noreferrer"},"https://en.wikipedia.org/wiki/Rolling_code")),r.a.createElement("br",null),r.a.createElement("p",null,"Built using ",r.a.createElement("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"},"React")," and ",r.a.createElement("a",{href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"},"Typescript")),r.a.createElement("p",null,"Media icons: ",r.a.createElement("a",{href:"https://fontawesome.com/",target:"_blank",rel:"noopener noreferrer"},"Font Awesome")),r.a.createElement("p",null,"CSS Speech Bubbles: ",r.a.createElement("a",{href:"http://nicolasgallagher.com/pure-css-speech-bubbles/demo/",target:"_blank",rel:"noopener noreferrer"},"http://nicolasgallagher.com/pure-css-speech-bubbles/demo/"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.6997124d.chunk.js.map